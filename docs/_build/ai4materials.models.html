

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Regression and classification models &mdash; ai4materials v0.1.0</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ai4materials.models.clustering module" href="ai4materials.models.clustering.html" />
    <link rel="prev" title="Creating and loading materials science datasets" href="ai4materials.wrappers.html" />
    <link href="_static/nomad-analytics.css" rel="stylesheet" type="text/css">


  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ai4materials
          

          
            
            <img src="_static/ai_for_materials_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.dataprocessing.html">Data preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.descriptors.html">Representing crystal structures: descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.wrappers.html">Creating and loading materials science datasets</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Regression and classification models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-ai4materials.models.l1_l0-example">Example regression: LASSO+l0 method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ai4materials.models.clustering.html">ai4materials.models.clustering module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ai4materials.models.cnn_architectures.html">ai4materials.models.cnn_architectures module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ai4materials.models.cnn_nature_comm_ziletti2018.html">ai4materials.models.cnn_nature_comm_ziletti2018 module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ai4materials.models.cnn_polycrystals.html">ai4materials.models.cnn_polycrystals module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ai4materials.models.embedding.html">ai4materials.models.embedding module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ai4materials.models.l1_l0.html">ai4materials.models.l1_l0 module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ai4materials.models.sis.html">ai4materials.models.sis module</a></li>
<li class="toctree-l3"><a class="reference internal" href="ai4materials.models.strided_pattern_matching.html">ai4materials.models.strided_pattern_matching module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-ai4materials.models">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.interpretation.html">Neural network interpretation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.utils.html">Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ai4materials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Regression and classification models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ai4materials.models.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="regression-and-classification-models">
<h1>Regression and classification models<a class="headerlink" href="#regression-and-classification-models" title="Permalink to this headline">¶</a></h1>
<p><em>ai4materials</em> allows to apply state-of-the-art data-analytics models to relevant materials science. Below, we present an
example based on compressed sensing.</p>
<div class="section" id="module-ai4materials.models.l1_l0-example">
<span id="example-regression-lasso-l0-method"></span><h2>Example regression: LASSO+l0 method<a class="headerlink" href="#module-ai4materials.models.l1_l0-example" title="Permalink to this headline">¶</a></h2>
<p>This example shows how to find descriptive parameters (short formulas) that predict crystal structure,
using the example of octet binary compounds that have either rocksalt (RS) or zincblende (ZB) structure.
It is based on Ref. <a class="footnote-reference" href="#id3" id="id1">[1]</a>, and it allows to reproduce the results presented in Fig. 2  of this reference.</p>
<p>Starting from simple physical quantities (“building blocks”, here properties of the constituent
free atoms such as orbital radii), thousands of candidate formulas are generated by applying arithmetic
operations combining building blocks, for example forming sums and products of them.
These candidate formulas constitute the so-called “feature space”.
Then, a sparse regression method is used to select only a few of these formulas that explain the data.</p>
<p>The code below performs following steps:</p>
<ul class="simple">
<li>read the dataset containing binary materials from file</li>
<li>calculate the atomic features using the descriptor <code class="xref py py-mod docutils literal notranslate"><span class="pre">ai4materials.descriptors.atomic_features.AtomicFeatures</span></code></li>
<li>calculate the descriptive parameters using the LASSO+l0 method with <a class="reference internal" href="ai4materials.wrappers.html#ai4materials.wrappers.calc_model" title="ai4materials.wrappers.calc_model"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ai4materials.wrappers.calc_model</span></code></a></li>
<li>plot the results.</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os.path</span>

<span class="n">atomic_data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="s1">&#39;/home/ziletti/nomad/nomad-lab-base/analysis-tools/atomic-data&#39;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">atomic_data_dir</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">ai4materials.utils.utils_config</span> <span class="kn">import</span> <span class="n">set_configs</span>
<span class="kn">from</span> <span class="nn">ai4materials.utils.utils_config</span> <span class="kn">import</span> <span class="n">setup_logger</span>
<span class="kn">from</span> <span class="nn">ai4materials.utils.utils_data_retrieval</span> <span class="kn">import</span> <span class="n">read_ase_db</span>
<span class="kn">from</span> <span class="nn">ai4materials.wrappers</span> <span class="kn">import</span> <span class="n">load_descriptor</span>
<span class="kn">from</span> <span class="nn">ai4materials.wrappers</span> <span class="kn">import</span> <span class="n">calc_model</span>
<span class="kn">from</span> <span class="nn">ai4materials.wrappers</span> <span class="kn">import</span> <span class="n">calc_descriptor</span>
<span class="kn">from</span> <span class="nn">ai4materials.descriptors.atomic_features</span> <span class="kn">import</span> <span class="n">AtomicFeatures</span>
<span class="kn">from</span> <span class="nn">ai4materials.descriptors.atomic_features</span> <span class="kn">import</span> <span class="n">get_table_atomic_features</span>
<span class="kn">from</span> <span class="nn">ai4materials.utils.utils_config</span> <span class="kn">import</span> <span class="n">get_data_filename</span>
<span class="kn">from</span> <span class="nn">ai4materials.visualization.viewer</span> <span class="kn">import</span> <span class="n">read_control_file</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c1"># modify this path if you want to save the calculation results in another location</span>
<span class="n">configs</span> <span class="o">=</span> <span class="n">set_configs</span><span class="p">(</span><span class="n">main_folder</span><span class="o">=</span><span class="s1">&#39;./l1_l0_example&#39;</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">setup_logger</span><span class="p">(</span><span class="n">configs</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span>

<span class="c1"># setup folder and files</span>
<span class="n">lookup_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">configs</span><span class="p">[</span><span class="s1">&#39;io&#39;</span><span class="p">][</span><span class="s1">&#39;main_folder&#39;</span><span class="p">],</span> <span class="s1">&#39;lookup.dat&#39;</span><span class="p">)</span>
<span class="n">materials_map_plot_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">configs</span><span class="p">[</span><span class="s1">&#39;io&#39;</span><span class="p">][</span><span class="s1">&#39;main_folder&#39;</span><span class="p">],</span> <span class="s1">&#39;binaries_l1_l0_map_prl2015.png&#39;</span><span class="p">)</span>

<span class="c1"># define descriptor - atomic features in this case</span>
<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;energy_unit&#39;</span><span class="p">:</span> <span class="s1">&#39;eV&#39;</span><span class="p">,</span> <span class="s1">&#39;length_unit&#39;</span><span class="p">:</span> <span class="s1">&#39;angstrom&#39;</span><span class="p">}</span>
<span class="n">descriptor</span> <span class="o">=</span> <span class="n">AtomicFeatures</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">configs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="c1"># =============================================================================</span>
<span class="c1"># Descriptor calculation</span>
<span class="c1"># =============================================================================</span>

<span class="n">desc_file_name</span> <span class="o">=</span> <span class="s1">&#39;atomic_features_binaries&#39;</span>
<span class="n">ase_db_file</span> <span class="o">=</span> <span class="n">get_data_filename</span><span class="p">(</span><span class="s1">&#39;data/db_ase/binaries_lowest_energy_ghiringhelli2015.json&#39;</span><span class="p">)</span>
<span class="n">ase_atoms_list</span> <span class="o">=</span> <span class="n">read_ase_db</span><span class="p">(</span><span class="n">db_path</span><span class="o">=</span><span class="n">ase_db_file</span><span class="p">)</span>

<span class="n">selected_feature_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atomic_ionization_potential&#39;</span><span class="p">,</span> <span class="s1">&#39;atomic_electron_affinity&#39;</span><span class="p">,</span> <span class="s1">&#39;atomic_rs_max&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;atomic_rp_max&#39;</span><span class="p">,</span> <span class="s1">&#39;atomic_rd_max&#39;</span><span class="p">]</span>
<span class="n">allowed_operations</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;|-|&#39;</span><span class="p">,</span> <span class="s1">&#39;exp&#39;</span><span class="p">,</span> <span class="s1">&#39;^2&#39;</span><span class="p">]</span>

<span class="n">desc_file_path</span> <span class="o">=</span> <span class="n">calc_descriptor</span><span class="p">(</span><span class="n">descriptor</span><span class="o">=</span><span class="n">descriptor</span><span class="p">,</span> <span class="n">configs</span><span class="o">=</span><span class="n">configs</span><span class="p">,</span> <span class="n">ase_atoms_list</span><span class="o">=</span><span class="n">ase_atoms_list</span><span class="p">,</span>
                                 <span class="n">desc_file</span><span class="o">=</span><span class="s1">&#39;lasso_l0_binaries_example.tar.gz&#39;</span><span class="p">,</span>
                                 <span class="n">format_geometry</span><span class="o">=</span><span class="s1">&#39;aims&#39;</span><span class="p">,</span>
                                 <span class="n">selected_feature_list</span><span class="o">=</span><span class="n">selected_feature_list</span><span class="p">,</span>
                                 <span class="n">nb_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># load descriptor</span>
<span class="n">target_list</span><span class="p">,</span> <span class="n">structure_list</span> <span class="o">=</span> <span class="n">load_descriptor</span><span class="p">(</span><span class="n">desc_files</span><span class="o">=</span><span class="n">desc_file_path</span><span class="p">,</span> <span class="n">configs</span><span class="o">=</span><span class="n">configs</span><span class="p">)</span>
<span class="n">df_atomic_features</span> <span class="o">=</span> <span class="n">get_table_atomic_features</span><span class="p">(</span><span class="n">structure_list</span><span class="p">)</span>

<span class="c1"># =============================================================================</span>
<span class="c1"># Model calculation</span>
<span class="c1"># =============================================================================</span>

<span class="n">chemical_formulas</span> <span class="o">=</span> <span class="p">[</span><span class="n">structure</span><span class="o">.</span><span class="n">get_chemical_formula</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;hill&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">structure</span> <span class="ow">in</span> <span class="n">structure_list</span><span class="p">]</span>
<span class="n">df_atomic_features</span><span class="p">[</span><span class="s1">&#39;chemical_formula&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chemical_formulas</span>
<span class="n">df_atomic_features</span> <span class="o">=</span> <span class="n">df_atomic_features</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;chemical_formula&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># target values to predict</span>
<span class="n">dict_delta_e</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">SeZn</span><span class="o">=</span><span class="mf">0.2631369195046646</span><span class="p">,</span> <span class="n">BaTe</span><span class="o">=-</span><span class="mf">0.37538683850924387</span><span class="p">,</span> <span class="n">BN</span><span class="o">=</span><span class="mf">1.7120803923951688</span><span class="p">,</span>
                    <span class="n">CGe</span><span class="o">=</span><span class="mf">0.8114429425515818</span><span class="p">,</span> <span class="n">GaP</span><span class="o">=</span><span class="mf">0.3487518245522925</span><span class="p">,</span> <span class="n">MgS</span><span class="o">=-</span><span class="mf">0.08669951164989079</span><span class="p">,</span>
                    <span class="n">GaN</span><span class="o">=</span><span class="mf">0.4334452723999156</span><span class="p">,</span> <span class="n">AlAs</span><span class="o">=</span><span class="mf">0.21326186549251072</span><span class="p">,</span> <span class="n">BP</span><span class="o">=</span><span class="mf">1.019225239514441</span><span class="p">,</span> <span class="n">FK</span><span class="o">=-</span><span class="mf">0.14640610974868423</span><span class="p">,</span>
                    <span class="n">BrLi</span><span class="o">=-</span><span class="mf">0.03274621540254649</span><span class="p">,</span> <span class="n">BSb</span><span class="o">=</span><span class="mf">0.5808491589999847</span><span class="p">,</span> <span class="n">CaTe</span><span class="o">=-</span><span class="mf">0.3504563060008138</span><span class="p">,</span>
                    <span class="n">ClK</span><span class="o">=-</span><span class="mf">0.16446069285018655</span><span class="p">,</span> <span class="n">BrCs</span><span class="o">=-</span><span class="mf">0.1558673149861294</span><span class="p">,</span> <span class="n">BrCu</span><span class="o">=</span><span class="mf">0.15244265149855352</span><span class="p">,</span>
                    <span class="n">ILi</span><span class="o">=-</span><span class="mf">0.021660938008450818</span><span class="p">,</span> <span class="n">CuF</span><span class="o">=-</span><span class="mf">0.01702227364862989</span><span class="p">,</span> <span class="n">FNa</span><span class="o">=-</span><span class="mf">0.14578814899027592</span><span class="p">,</span>
                    <span class="n">C2</span><span class="o">=</span><span class="mf">2.6286038411199026</span><span class="p">,</span> <span class="n">AgBr</span><span class="o">=-</span><span class="mf">0.030033419005850936</span><span class="p">,</span> <span class="n">CuI</span><span class="o">=</span><span class="mf">0.20467459898973175</span><span class="p">,</span>
                    <span class="n">GaSb</span><span class="o">=</span><span class="mf">0.15462529698986593</span><span class="p">,</span> <span class="n">ClLi</span><span class="o">=-</span><span class="mf">0.03838148564873346</span><span class="p">,</span> <span class="n">AsIn</span><span class="o">=</span><span class="mf">0.13404758548892423</span><span class="p">,</span>
                    <span class="n">OZn</span><span class="o">=</span><span class="mf">0.10196818460305757</span><span class="p">,</span> <span class="n">MgO</span><span class="o">=-</span><span class="mf">0.2322747421651549</span><span class="p">,</span> <span class="n">InP</span><span class="o">=</span><span class="mf">0.17919330099729866</span><span class="p">,</span>
                    <span class="n">Ge2</span><span class="o">=</span><span class="mf">0.20085254149716641</span><span class="p">,</span> <span class="n">InN</span><span class="o">=</span><span class="mf">0.15372030450150198</span><span class="p">,</span> <span class="n">CSn</span><span class="o">=</span><span class="mf">0.45353800899655555</span><span class="p">,</span>
                    <span class="n">CdTe</span><span class="o">=</span><span class="mf">0.11453954098812649</span><span class="p">,</span> <span class="n">TeZn</span><span class="o">=</span><span class="mf">0.24500131400199776</span><span class="p">,</span> <span class="n">MgTe</span><span class="o">=-</span><span class="mf">0.004591286999846332</span><span class="p">,</span>
                    <span class="n">BaS</span><span class="o">=-</span><span class="mf">0.3197624539995756</span><span class="p">,</span> <span class="n">CaSe</span><span class="o">=-</span><span class="mf">0.36079776214906895</span><span class="p">,</span> <span class="n">FRb</span><span class="o">=-</span><span class="mf">0.1355957874033439</span><span class="p">,</span>
                    <span class="n">BeO</span><span class="o">=</span><span class="mf">0.6918376303948839</span><span class="p">,</span> <span class="n">AsB</span><span class="o">=</span><span class="mf">0.8749782510022386</span><span class="p">,</span> <span class="n">CaS</span><span class="o">=-</span><span class="mf">0.36913322290101264</span><span class="p">,</span>
                    <span class="n">CaO</span><span class="o">=-</span><span class="mf">0.2652190617003161</span><span class="p">,</span> <span class="n">BaO</span><span class="o">=-</span><span class="mf">0.09299856100784433</span><span class="p">,</span> <span class="n">AlSb</span><span class="o">=</span><span class="mf">0.15686874600534004</span><span class="p">,</span>
                    <span class="n">SrTe</span><span class="o">=-</span><span class="mf">0.3792947550252322</span><span class="p">,</span> <span class="n">BeS</span><span class="o">=</span><span class="mf">0.5063277134499351</span><span class="p">,</span> <span class="n">InSb</span><span class="o">=</span><span class="mf">0.0780598790169251</span><span class="p">,</span>
                    <span class="n">SZn</span><span class="o">=</span><span class="mf">0.27581334679854935</span><span class="p">,</span> <span class="n">OSr</span><span class="o">=-</span><span class="mf">0.2203066401004525</span><span class="p">,</span> <span class="n">BrRb</span><span class="o">=-</span><span class="mf">0.1638205440075271</span><span class="p">,</span>
                    <span class="n">BeSe</span><span class="o">=</span><span class="mf">0.4949404808020511</span><span class="p">,</span> <span class="n">ClRb</span><span class="o">=-</span><span class="mf">0.16050356640655905</span><span class="p">,</span> <span class="n">BrNa</span><span class="o">=-</span><span class="mf">0.1264287376032476</span><span class="p">,</span>
                    <span class="n">MgSe</span><span class="o">=-</span><span class="mf">0.05530180620975655</span><span class="p">,</span> <span class="n">GeSn</span><span class="o">=</span><span class="mf">0.08166336650886348</span><span class="p">,</span> <span class="n">GeSi</span><span class="o">=</span><span class="mf">0.2632101904042582</span><span class="p">,</span>
                    <span class="n">CsF</span><span class="o">=-</span><span class="mf">0.10826332699038382</span><span class="p">,</span> <span class="n">CdSe</span><span class="o">=</span><span class="mf">0.08357195550137826</span><span class="p">,</span> <span class="n">FLi</span><span class="o">=-</span><span class="mf">0.059488321434879074</span><span class="p">,</span>
                    <span class="n">AlN</span><span class="o">=</span><span class="mf">0.07294907877519896</span><span class="p">,</span> <span class="n">Si2</span><span class="o">=</span><span class="mf">0.2791658430004932</span><span class="p">,</span> <span class="n">SiSn</span><span class="o">=</span><span class="mf">0.13510880949563495</span><span class="p">,</span>
                    <span class="n">ClNa</span><span class="o">=-</span><span class="mf">0.13299199530041886</span><span class="p">,</span> <span class="n">CdO</span><span class="o">=-</span><span class="mf">0.0841613645001312</span><span class="p">,</span> <span class="n">SSr</span><span class="o">=-</span><span class="mf">0.36843415824218</span><span class="p">,</span>
                    <span class="n">IK</span><span class="o">=-</span><span class="mf">0.16703915799644553</span><span class="p">,</span> <span class="n">BaSe</span><span class="o">=-</span><span class="mf">0.3434451604764059</span><span class="p">,</span> <span class="n">BrK</span><span class="o">=-</span><span class="mf">0.1661759769597461</span><span class="p">,</span>
                    <span class="n">BeTe</span><span class="o">=</span><span class="mf">0.4685859464949282</span><span class="p">,</span> <span class="n">CdS</span><span class="o">=</span><span class="mf">0.07267280149604124</span><span class="p">,</span> <span class="n">CsI</span><span class="o">=-</span><span class="mf">0.16238748698990838</span><span class="p">,</span>
                    <span class="n">INa</span><span class="o">=-</span><span class="mf">0.11483823100687315</span><span class="p">,</span> <span class="n">AlP</span><span class="o">=</span><span class="mf">0.2189583583002711</span><span class="p">,</span> <span class="n">AsGa</span><span class="o">=</span><span class="mf">0.27427779349540243</span><span class="p">,</span>
                    <span class="n">SeSr</span><span class="o">=-</span><span class="mf">0.3745109805057823</span><span class="p">,</span> <span class="n">CSi</span><span class="o">=</span><span class="mf">0.669023778644634</span><span class="p">,</span> <span class="n">AgCl</span><span class="o">=-</span><span class="mf">0.04279728149250233</span><span class="p">,</span>
                    <span class="n">AgI</span><span class="o">=</span><span class="mf">0.03692542249419624</span><span class="p">,</span> <span class="n">AgF</span><span class="o">=-</span><span class="mf">0.15375768499313544</span><span class="p">,</span> <span class="n">ClCs</span><span class="o">=-</span><span class="mf">0.1503461689991465</span><span class="p">,</span>
                    <span class="n">Sn2</span><span class="o">=</span><span class="mf">0.016963900503544026</span><span class="p">,</span> <span class="n">ClCu</span><span class="o">=</span><span class="mf">0.15625872520000064</span><span class="p">,</span> <span class="n">IRb</span><span class="o">=-</span><span class="mf">0.16720145498980848</span><span class="p">)</span>

<span class="n">df_atomic_features</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_atomic_features</span><span class="p">[</span><span class="s1">&#39;chemical_formula&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">dict_delta_e</span><span class="p">)</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">df_atomic_features</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">))</span>

<span class="n">cols_to_drop</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;chemical_formula&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;ordered_chemical_symbols&#39;</span><span class="p">]</span>

<span class="c1"># use the l1-l0 method proposed in Ghiringhelli et al. (2015)</span>
<span class="n">calc_model</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;l1_l0&#39;</span><span class="p">,</span> <span class="n">df_features</span><span class="o">=</span><span class="n">df_atomic_features</span><span class="p">,</span> <span class="n">cols_to_drop</span><span class="o">=</span><span class="n">cols_to_drop</span><span class="p">,</span>
           <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">max_dim</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">allowed_operations</span><span class="o">=</span><span class="n">allowed_operations</span><span class="p">,</span>
           <span class="n">tmp_folder</span><span class="o">=</span><span class="n">configs</span><span class="p">[</span><span class="s1">&#39;io&#39;</span><span class="p">][</span><span class="s1">&#39;tmp_folder&#39;</span><span class="p">],</span> <span class="n">results_folder</span><span class="o">=</span><span class="n">configs</span><span class="p">[</span><span class="s1">&#39;io&#39;</span><span class="p">][</span><span class="s1">&#39;results_folder&#39;</span><span class="p">],</span>
           <span class="n">lookup_file</span><span class="o">=</span><span class="n">lookup_file</span><span class="p">,</span> <span class="n">control_file</span><span class="o">=</span><span class="n">configs</span><span class="p">[</span><span class="s1">&#39;io&#39;</span><span class="p">][</span><span class="s1">&#39;control_file&#39;</span><span class="p">],</span> <span class="n">energy_unit</span><span class="o">=</span><span class="s1">&#39;eV&#39;</span><span class="p">,</span>
           <span class="n">length_unit</span><span class="o">=</span><span class="s1">&#39;angstrom&#39;</span><span class="p">)</span>

<span class="c1"># read the results for the two-dimensional descriptor</span>
<span class="n">viewer_filename</span> <span class="o">=</span> <span class="s1">&#39;l1_l0_dim1_for_viewer.csv&#39;</span>
<span class="n">viewer_filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">configs</span><span class="p">[</span><span class="s1">&#39;io&#39;</span><span class="p">][</span><span class="s1">&#39;results_folder&#39;</span><span class="p">],</span> <span class="n">viewer_filename</span><span class="p">)</span>
<span class="n">df_viewer</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">viewer_filepath</span><span class="p">)</span>
<span class="n">x_axis_label</span><span class="p">,</span> <span class="n">y_axis_label</span> <span class="o">=</span> <span class="n">read_control_file</span><span class="p">(</span><span class="n">configs</span><span class="p">[</span><span class="s1">&#39;io&#39;</span><span class="p">][</span><span class="s1">&#39;control_file&#39;</span><span class="p">])</span>

<span class="c1"># plot the results for the two-dimensional descriptor</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">df_viewer</span><span class="p">[</span><span class="s1">&#39;coord_0&#39;</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df_viewer</span><span class="p">[</span><span class="s1">&#39;coord_1&#39;</span><span class="p">]</span>
<span class="n">color</span> <span class="o">=</span> <span class="n">df_viewer</span><span class="p">[</span><span class="s1">&#39;y_true&#39;</span><span class="p">]</span>
<span class="n">chemical_formula</span> <span class="o">=</span> <span class="n">df_viewer</span><span class="p">[</span><span class="s1">&#39;chemical_formula&#39;</span><span class="p">]</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;rainbow&#39;</span><span class="p">)</span>
<span class="n">sc</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="p">)</span>

<span class="c1"># annotate the points</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">txt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chemical_formula</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>  <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_axis_label</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_axis_label</span><span class="p">)</span>
<span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">sc</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Reference E(RS)-E(ZB)&#39;</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;l1/l0 structure map for binary compounds</span><span class="se">\n</span><span class="s2"> &quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figtext</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="s2">&quot;Compare with Fig. 2 in Ghiringhelli et al., Phys. Rev. Lett 114 (10), 105503 (2015)&quot;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;italic&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">materials_map_plot_file</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</pre></div>
</div>
<p>This is the plot showing the calculated energy differences between rocksalt and zincblende structures
of the 82 octet binary AB materials used in Ref. <a class="footnote-reference" href="#id3" id="id2">[1]</a>  according to the two-dimensional descriptor found via the
LASSO+l0 procedure:</p>
<img alt="_images/binaries_l1_l0_map_prl2015.png" src="_images/binaries_l1_l0_map_prl2015.png" />
<p>Implementation details of how atomic features are automatically constructed can be found at
<code class="xref py py-mod docutils literal notranslate"><span class="pre">ai4materials.descriptors.atomic_features</span></code>. Implementation details of the LASSO+l0 method can be found at
<a class="reference internal" href="ai4materials.wrappers.html#ai4materials.wrappers.calc_model" title="ai4materials.wrappers.calc_model"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ai4materials.wrappers.calc_model</span></code></a> and at <a class="reference internal" href="ai4materials.models.l1_l0.html#module-ai4materials.models.l1_l0" title="ai4materials.models.l1_l0"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ai4materials.models.l1_l0</span></code></a>.</p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> L. M. Ghiringhelli, J. Vybiral, S. V. Levchenko, C. Draxl, and M. Scheffler, “Big Data of Materials
Science: Critical Role of the Descriptor,” Physical Review Letters, vol. 114, no. 10, p. 105503 .
[<a class="reference external" href="https://link.aps.org/doi/10.1103/PhysRevLett.114.105503">Link to article</a>]</td></tr>
</tbody>
</table>
<p><em>Section author: Angelo Ziletti &lt;<a class="reference external" href="mailto:angelo&#46;ziletti&#37;&#52;&#48;gmail&#46;com">angelo<span>&#46;</span>ziletti<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</em></p>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.models.clustering.html">ai4materials.models.clustering module</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.models.cnn_architectures.html">ai4materials.models.cnn_architectures module</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.models.cnn_nature_comm_ziletti2018.html">ai4materials.models.cnn_nature_comm_ziletti2018 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.models.cnn_polycrystals.html">ai4materials.models.cnn_polycrystals module</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.models.embedding.html">ai4materials.models.embedding module</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.models.l1_l0.html">ai4materials.models.l1_l0 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.models.sis.html">ai4materials.models.sis module</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ai4materials.models.strided_pattern_matching.html">ai4materials.models.strided_pattern_matching module</a></li>
</ul>
</div>
</div>
<div class="section" id="module-ai4materials.models">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ai4materials.models" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ai4materials.models.clustering.html" class="btn btn-neutral float-right" title="ai4materials.models.clustering module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ai4materials.wrappers.html" class="btn btn-neutral" title="Creating and loading materials science datasets" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Angelo Ziletti.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>